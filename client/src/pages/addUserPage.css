/* ====== Signup (User Registration) Layout - FIXED & POLISHED ====== */

/* ✅ الحاوية العامة */
.signup-layout {
  padding: 20px;
  display: flex;
  /* كان height: 100vh؛ هذا يسبب قصّاً أسفل الهيدر */
  min-height: calc(100vh - var(--header-height, 0px));
  width: 100%;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  contain: layout style; /* تحسين الأداء */
  gap: 10px;
}

/* دعم ارتفاعات الموبايل الحديثة (لتجاوز 100vh في iOS/Android) */
@supports (height: 100svh) {
  .signup-layout {
    min-height: calc(100svh - var(--header-height, 0px));
  }
}

/* ✅ القسم الأيسر (الصورة) */
.signup-image-section {
  flex: 0 0 35%;
  position: relative;
  background: white;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  padding: 2rem;
  border-right: 1px solid #E5E7EB;
  will-change: auto;
  contain: layout;
}

.signup-image-section .image-overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.3);
  z-index: 1;
}

.user-add-image {
  width: 75%;
  max-width: 500px;
  height: auto;
  z-index: 2;
  filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.25));
  animation: floatImage 4s ease-in-out infinite;
}

/* وضع ملء الصورة */
.signup-image-section.fullscreen-image {
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  padding: 0;
}
.fullscreen-container {
  position: absolute !important;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: 2;
  display: flex; align-items: center; justify-content: center;
}
.fullscreen-image-element {
  width: 100% !important;
  height: 100% !important;
  max-width: none !important;
  object-fit: cover;
  object-position: center;
  filter:
    drop-shadow(0 0 20px rgba(0, 0, 0, 0.15))
    brightness(0.95)
    contrast(1.1);
  transition: all 0.4s ease;
  animation: none;
}
.fullscreen-image-element:hover {
  filter:
    drop-shadow(0 0 25px rgba(0, 0, 0, 0.2))
    brightness(1)
    contrast(1.15);
  transform: scale(1.01);
}

/* ✅ منطقة النموذج (اليمنى) */
.signup-form-section {
  flex: 1;                         /* يأخذ المساحة المتبقية */
  display: flex;
  flex-direction: column;
  padding: 1.5rem;
  background: white;

  /* 👇 اسمح بالتمرير العمودي وأظهر شريط التمرير (لا تُخفِه أثناء التطوير) */
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: auto;           /* Firefox */
  -ms-overflow-style: auto;        /* IE/Edge */

  /* كان contain: layout size; وهذا قد يقيّد التمدد الطبيعي */
  contain: none;
  will-change: auto;
}

/* إ
.signup-form-section::-webkit-scrollbar { display: none; }
*/
.form-container .form-header {
  text-align: center;
  margin-bottom:0px;

}

.signup-form-section .form-container {
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  margin: 0 auto;
  padding: 20px;
  /* كان هناك إطار أحمر للتجربة، أُزيل */
  /* border: #c69811 6px solid; */
}

/* ✅ حركة الصورة */
@keyframes floatImage {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-15px); }
}

/* 📱 التصميم المتجاوب */
@media (max-width: 768px) {
  .signup-layout { flex-direction: column; }

  .signup-image-section {
    height: 300px;
    flex: none;
    padding: 1rem;
  }

  .signup-form-section {
    flex: 1;
    padding: 1.5rem;
    height: auto;
    min-height: 0; /* يضمن عدم إجبار القسم على الارتفاع */
  }

  .signup-image-section.fullscreen-image { height: 300px; }

  .fullscreen-image-element {
    object-fit: cover;
    width: 100% !important;
    height: 100% !important;
  }

  .user-add-image { width: 60%; }
}

/* 🎨 التأثيرات المتطورة الجديدة */
.signup-layout.fade-in-entrance { animation: fadeInEntrance 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
.signup-layout.welcome-ready     { animation: welcomeReady 0.6s ease-out; }
.signup-layout.processing        { animation: processingMode 1s ease-in-out infinite alternate; }
.signup-layout.success-celebration { animation: successCelebration 0.8s ease-out; }
.signup-layout.error-shake       { animation: errorShake 0.5s ease-in-out; }

.image-container { position: relative; z-index: 4; }

/* طبقة تحميل */
.loading-overlay {
  position: absolute; inset: 0;
  background: rgba(0, 164, 67, 0.9);
  backdrop-filter: blur(8px);
  display: flex; align-items: center; justify-content: center;
  border-radius: 20px; z-index: 10;
}
.loading-spinner { text-align: center; color: white; }
.spinner-ring {
  width: 40px; height: 40px;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-top: 3px solid white;
  border-radius: 50%;
  animation: spinnerRotate 1s linear infinite;
  margin: 0 auto 10px;
}
.loading-text { font-size: 14px; font-weight: 600; }

/* شريط التقدم */
.progress-indicator {
  width: 100%;
  height: 3px;
  background: rgba(0, 164, 67, 0.2);
  border-radius: 2px;
  margin-top: 0.5rem;
  overflow: hidden;
}
.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #00A443, #4CAF50);
  width: 0;
  transition: width 0.3s ease;
  border-radius: 2px;
}
.progress-bar.processing { width: 60%; animation: progressPulse 1s ease-in-out infinite; }
.progress-bar.complete   { width: 100%; }

/* التنبيهات */
.sophisticated-alert {
  display: flex; align-items: center; gap: 1rem;
  padding: 1rem 1.5rem; border-radius: 12px;
  border: 1px solid rgba(220, 53, 69, 0.3);
  background: linear-gradient(135deg, #fff5f5 0%, #fef2f2 100%);
  margin-bottom: 1.5rem;
}
.alert-icon { font-size: 1.5rem; flex-shrink: 0; }
.alert-dismiss-btn {
  position: absolute; top: 5px; right: 10px;
  background: none; border: none; font-size: 1.2rem;
  color: #dc3545; cursor: pointer;
}

/* الأزرار */
.elegant-btn{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.75rem 1.5rem; border-radius:8px;
  border:1px solid #00A443; background:#fff; color:#00A443;
  font-weight:600; cursor:pointer; transition:all .3s ease;
}
.elegant-btn:hover{ background:#00A443; color:#fff; transform:translateY(-2px); }
.premium-btn{ background:linear-gradient(135deg,#00A443 0%,#4CAF50 100%); color:#fff; border:none;
  box-shadow:0 4px 15px rgba(0,164,67,.3); }
.premium-btn:hover{ transform:translateY(-3px); box-shadow:0 8px 25px rgba(0,164,67,.4); }

/* وضع الاحتفال */
.celebration-mode{ text-align:center; padding:2rem; animation: celebrationPulse 2s ease-in-out infinite; }
.success-checkmark{ width:80px; height:80px; margin:0 auto 1rem; }
.checkmark-circle{
  width:80px; height:80px; background:linear-gradient(135deg,#00A443,#4CAF50);
  border-radius:50%; display:flex; align-items:center; justify-content:center;
  animation: checkmarkBounce .6s ease-out; color:#fff; font-size:2rem; font-weight:bold;
}
.success-stats{ display:flex; justify-content:center; gap:2rem; margin:1rem 0; }
.stat-item{ text-align:center; }
.stat-number{ display:block; font-size:1.5rem; font-weight:bold; color:#00A443; }
.stat-label{ font-size:.8rem; color:#666; }

/* تذييل النموذج */
.form-footer{ margin-top:2rem; padding-top:1rem; border-top:1px solid rgba(0,164,67,.1); }
.security-badge{ display:flex; align-items:center; justify-content:center; gap:.5rem; margin-bottom:1rem; color:#666; font-size:.85rem; }
.support-text{ font-size:.8rem; color:#999; text-align:center; }
.support-link{ color:#00A443; text-decoration:none; margin-right:.25rem; }

/* 🎬 حركات عامة */
@keyframes fadeInEntrance {
  0% { opacity: 0; transform: translateY(30px) scale(.95); }
  100%{ opacity: 1; transform: translateY(0)   scale(1); }
}
@keyframes welcomeReady { 0%{filter:brightness(1)} 50%{filter:brightness(1.1)} 100%{filter:brightness(1)} }
@keyframes processingMode { 0%{filter:hue-rotate(0)} 100%{filter:hue-rotate(10deg)} }
@keyframes successCelebration { 0%{transform:scale(1)} 50%{transform:scale(1.05)} 100%{transform:scale(1)} }
@keyframes errorShake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-5px)} 75%{transform:translateX(5px)} }
@keyframes spinnerRotate { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
@keyframes progressPulse { 0%,100%{opacity:1} 50%{opacity:.7} }
@keyframes celebrationPulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.02)} }
@keyframes checkmarkBounce { 0%{transform:scale(0)} 50%{transform:scale(1.2)} 100%{transform:scale(1)} }

/* 🚀 أنماط نظام الخطوات المتعددة */
.steps-progress-container{
  margin:0;
  padding:0.5rem;
  background:linear-gradient(135deg,rgba(255,255,255,.95) 0%,rgba(248,249,250,.95) 100%);
  border-radius:20px;
  box-shadow:0 8px 32px rgba(0,164,67,.1), 0 4px 16px rgba(0,0,0,.05);
  backdrop-filter: blur(10px);
  border:1px solid rgba(0,164,67,.1);
  animation: stepContainerGlow 3s ease-in-out infinite;
  -webkit-animation: stepContainerGlow 3s ease-in-out infinite;
}
.steps-info{ display:flex; align-items:center; justify-content:space-between; margin-bottom:1rem; gap:1rem; }
.current-step-info{ display:flex; align-items:center; gap:1rem; flex:1; }
.step-icon{ font-size:2.5rem; animation: iconBounce 2s ease-in-out infinite; filter: drop-shadow(0 4px 8px rgba(0,164,67,.2)); }
.step-details{ display:flex; flex-direction:column; gap:.3rem; }
.step-title{ font-size:1.2rem; font-weight:700; color:#00A443; margin:0; text-shadow:0 2px 4px rgba(0,0,0,.1); }
.step-description{ font-size:.9rem; color:#666; margin:0; font-weight:500; }

.steps-dots-header{ display:flex; align-items:center; gap:.75rem; padding:.5rem; }
.step-dot-header{
  width:40px; height:40px; border-radius:50%;
  border:2px solid #E0E0E0; background:#fff; color:#999;
  font-weight:700; font-size:.85rem;
  transition: all .3s cubic-bezier(.4,0,.2,1);
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 2px 8px rgba(0,0,0,.1);
  position:relative; overflow:hidden;
}
.step-dot-header.active{
  background:linear-gradient(135deg,#00A443,#4CAF50);
  color:#fff; border-color:#00A443; transform:scale(1.1);
  box-shadow:0 8px 24px rgba(0,164,67,.3);
  animation: activeDotPulse 2s ease-in-out infinite;
}
.step-dot-header.completed{
  background:linear-gradient(135deg,#4CAF50,#66BB6A);
  color:#fff; border-color:#4CAF50; font-size:1rem;
}

/* شريط التقدم المُحدّث */
.progress-indicator{
  position:relative; width:100%; height:8px;
  background:linear-gradient(90deg, rgba(0,164,67,.1), rgba(76,175,80,.1));
  border-radius:10px; overflow:hidden; margin:1rem 0; box-shadow: inset 0 2px 4px rgba(0,0,0,.1);
}
.progress-bar{
  height:100%;
  background:linear-gradient(90deg,#00A443,#4CAF50,#66BB6A);
  border-radius:10px;
  transition: width .8s cubic-bezier(.4,0,.2,1);
  position:relative; overflow:hidden;
  animation: progressShimmer 2s ease-in-out infinite;
}
.progress-bar::after{
  content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.4), transparent);
  animation: shimmerMove 2s ease-in-out infinite;
}

/* نقاط الخطوات */
.steps-dots{ display:flex; justify-content:space-between; align-items:center; margin-top:1rem; gap:.5rem; }
.step-dot{
  width:45px; height:45px; border-radius:50%;
  border:2px solid #E0E0E0; background:#fff; color:#999; font-weight:700; font-size:.9rem;
  transition: all .3s cubic-bezier(.4,0,.2,1);
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 2px 8px rgba(0,0,0,.1); position:relative; overflow:hidden;
}
.step-dot.active{
  background:linear-gradient(135deg,#00A443,#4CAF50);
  color:#fff; border-color:#00A443; transform:scale(1.1);
  box-shadow:0 8px 24px rgba(0,164,67,.3);
  animation: activeDotPulse 2s ease-in-out infinite;
}
.step-dot.completed{
  background:linear-gradient(135deg,#4CAF50,#66BB6A);
  color:#fff; border-color:#4CAF50; font-size:1.1rem;
}
.step-dot:disabled{ opacity:.6; cursor:not-allowed; }

/* حركات إضافية */
@keyframes stepContainerGlow{
  0%,100%{ box-shadow:0 8px 32px rgba(0,164,67,.1), 0 4px 16px rgba(0,0,0,.05); }
  50%    { box-shadow:0 12px 40px rgba(0,164,67,.15), 0 6px 20px rgba(0,0,0,.08); }
}
@keyframes iconBounce{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
@keyframes counterPulse{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.05)} }
@keyframes progressShimmer{ 0%,100%{opacity:1} 50%{opacity:.8} }
@keyframes shimmerMove{ 0%{left:-100%} 100%{left:100%} }
@keyframes activeDotPulse{
  0%,100%{ transform:scale(1.1); box-shadow:0 8px 24px rgba(0,164,67,.3); }
  50%   { transform:scale(1.15); box-shadow:0 12px 32px rgba(0,164,67,.4); }
}

/* انتقالات الخطوات */
.step-forward { animation: slideForward .5s ease-out; }
.step-backward{ animation: slideBackward .5s ease-out; }
.step-jump    { animation: stepJump .4s ease-out; }
@keyframes slideForward { 0%{transform:translateX(30px); opacity:.7} 100%{transform:translateX(0); opacity:1} }
@keyframes slideBackward{ 0%{transform:translateX(-30px); opacity:.7} 100%{transform:translateX(0); opacity:1} }
@keyframes stepJump     { 0%{transform:scale(.95); opacity:.8} 50%{transform:scale(1.02)} 100%{transform:scale(1); opacity:1} }

/* 📱 تحسينات استجابة إضافية */
@media (max-width: 768px) {
  .steps-progress-container{ margin:1rem 0; padding:1rem; }
  .steps-info{ flex-direction:column; align-items:flex-start; gap:1rem; }
  .current-step-info{ width:100%; }
  .steps-dots-header{ gap:.5rem; padding:.25rem; }
  .step-dot-header{ width:32px; height:32px; font-size:.75rem; }
  .step-icon{ font-size:2rem; }
  .step-title{ font-size:1.1rem; }
  .step-description{ font-size:.85rem; }
  .steps-dots{ gap:.25rem; }
  .step-dot{ width:35px; height:35px; font-size:.8rem; }
}
@media (max-width: 480px) {
  .steps-progress-container{ padding:.75rem; margin:.75rem 0; }
  .current-step-info{ gap:.75rem; }
  .step-icon{ font-size:1.75rem; }
  .step-title{ font-size:1rem; }
  .step-description{ font-size:.8rem; }
  .steps-dots-header{ gap:.4rem; }
  .step-dot-header{ width:28px; height:28px; font-size:.7rem; }
  .steps-dots{ gap:.2rem; }
  .step-dot{ width:30px; height:30px; font-size:.75rem; }
}
